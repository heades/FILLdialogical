\usepackage[utf8]{inputenc}
\usepackage{amssymb,amsmath,amsthm}
\usepackage{cmll}
\usepackage{stmaryrd}
\usepackage{todonotes}
\usepackage{mathpartir}
\usepackage{hyperref}
\usepackage[barr]{xy}

\include{type-theory_inc}

\title{Multiple Conclusion Intuitionistic Linear Logic and Cut Elimination}
\author{Harley Eades III and Valeria de Paiva}
\date{}

% Ott includes.
\usepackage{color}
\usepackage{supertabular}

\input{FILL-ott}

% Renewing some Ott commands to shrink some of the labels.
\renewcommand{\FILLdrulename}[1]{\scriptsize \textsc{#1}}

% Cat commands.
\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\limp}[0]{\multimap}
\newcommand{\dial}[0]{\mathsf{Dial_2}(\mathsf{Sets})}
\newcommand{\sets}[0]{\mathsf{Sets}}
\newcommand{\obj}[1]{\mathsf{Obj}(#1)}
\newcommand{\mor}[1]{\mathsf{Mor(#1)}}
\newcommand{\id}[0]{\mathsf{id}}

\begin{document}

\maketitle

\begin{abstract}
  Full Intuitionistic Linear Logic (FILL) was first introduced by
  Hyland and de Paiva as one of the results of their investigation
  into a categorical understanding of G\"odel’s Dialectica
  interpretation. FILL went against current beliefs that it was not
  possible to incorporate all of the linear connectives, e.g. tensor,
  par, and implication, into an intuitionistic linear logic. They
  showed that it is natural to support all of the connectives given
  sequents that have multiple hypotheses and multiple conclusions. To
  enforce intuitionism de Paiva’s original formalization of FILL used
  the well-known Dragalin restriction, forcing the implication right
  rule to have only a single conclusion in its premise, but Schellinx
  showed that this results in a failure of cut-elimination. To
  overcome this failure Hyland and de Paiva introduced a term
  assignment for FILL that eliminated the need for the strong
  restriction. The main idea was to first relax the restriction by
  assigning variables to each hypothesis and terms to each conclusion.
  Then when introducing an implication on the right enforcing that the
  variable annotating the hypothesis being discharged is only free in
  the term annotating the conclusion of the implication. Bierman
  showed in a short note that this formalization of FILL still did not
  enjoy cut-elimination, because of a flaw in the left rule for
  par. However, Bellin proposed an alternate left rule for par and
  conjectured that by adopting his rule cut-elimination is
  restored. In this note we show that adopting Bellin’s proposed rule
  one does obtain cut-elimination for FILL, as
  suggested. Additionally, we show that FILL can be modeled by a new
  form of dialectica category called order-enriched dialectica
  category, and discuss future work giving FILL a semantics in terms
  of Lorenzen games.
\end{abstract}

\todo{Change references to Section 3 to the new semantic results.}

\section{Introduction}
\label{sec:introduction}

A commonly held belief during the early history of linear logic was
that the linear-connective par could not be incorporated into an
intuitionistic linear logic.  This belief was challenged when de Paiva
gave a categorical understanding of G\"odel's Dialectica
interpretation in terms of dialectica categories
\cite{dePaiva:1987,dePaiva:1988}.  Upon setting out on her
investigation she initially believed that dialectica categories would
end up being a model of intuitionistic logic, but to her surprise they
are actually models of intuitionistic linear logic, containing the
linear connectives: tensor, par, implication, and their units.
Furthermore, unlike other models at that time the units did not
collapse into a single object.

Armed with this semantic insight de Paiva gave the first formalization
of Full Intuitionistic Linear Logic (FILL) \cite{dePaiva:1988}.  FILL
is a sequent calculus with multiple conclusions in addition to
multiple hypotheses.  Logics of this type go back to Gentzen's work on
the sequent calculi LK and LJ, and Maehara's work on LJ'
\cite{Maehara:1954,Takeuti:1975}.  The sequents in these types of
logics usually have the form $\Gamma \vdash \Delta$ where $\Gamma$ and
$\Delta$ are multisets of formulas.  Sequents such as these are read
as ``the conjunction of the formulas in $\Gamma$ imply the disjunction
of the formulas in $\Delta$''.  For a brief, but more complete history
of logics with multiple conclusions see the introduction to
\cite{dePaiva:2005}.

Gentzen showed that to obtain intuitionistic logic one could start
with the logic LK and then place a cardinality restriction on the
righthand side of sequents, however, this is not the only means of
enforcing intuitionism.  Maehara showed that in the propositional case
one could simply place the cardinality restriction on the premise of
the implication right rule, and leave all of the other rules of LK
unrestricted.  This restriction is sometimes called the Dragalin
restriction, as it appeared in his AMS textbook \cite{Dragalin:1988}.
The classical implication right rule has the form:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=impR] {
      [[G]], [[A]] \vdash [[B]], [[L]]
    }{[[G]] \vdash [[A -o B]], [[L]]}
  \end{math}
\end{center}
By placing the Dragalin restriction on the previous rule we obtain:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=impR] {
      [[G]], [[A]] \vdash [[B]]
    }{[[G]] \vdash [[A -o B]]}
  \end{math}
\end{center}
de Paiva's first formalization of FILL used the Dragalin restriction,
see \cite{dePaiva:1988} p. 58, but Schellinx showed that this restriction has
the unfortunate consequence of breaking cut-elimination
\cite{Schellinx:1991}.

Later, Hyland and de Paiva gave an alternate formalization of FILL in
the hopes to regain cut-elimination \cite{Hyland:1993}.  This new
formalization lifted the Dragalin restriction by decorating sequents
with a term assignment.  Hypotheses were assigned variables, and the
conclusions were assigned terms.  Then using these terms one can track
the use of hypotheses throughout a derivation.  They proposed a new
implication right rule:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=impR] {
      [[G, x : A |- t : B,L]]
      \\
      [[x nin FV(L)]]
    }{[[G |- \x.t : A -o B, L]]}
  \end{math}
\end{center}
Intuitionism is enforced in this rule by requiring that the variable
being dischanged, $x$,
is potentially free in only one term annotating a conclusion.
Unfortunately, this formalization did not enjoy cut-elimination
either.

Bierman was able to give a counterexample to cut-elimination
\cite{Bierman:1996}.  As Bierman explains the problem was with the
left rule for par.  The original rule was as follows:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=parL] {
      [[G, x : A |- L]] 
      \\
      [[G', y : B |- L']]
    }{[[G,G',z : A (+) B |- h(let z be (x (+) -) in L) | h(let z be (- (+) y) in L')]]}
  \end{math}
\end{center}
In this rule the pattern variables $x$ and $y$ are bound in each term
of $L$ and $L'$ respectively. Notice that the variable $z$ becomes
free in every term in $L$ and $L'$. Bierman showed that this rule
mixed with the restriction on implication right prevents the usual
cut-elimination step that commutes cut with the left rule for par.
The main idea behind the counterexample is that in the derivation
before commuting the cut it is possible to discharge $z$ using
implication right, but after the cut is commuted past the left rule
for par, the variable $z$ becomes free in more than one conclusion,
and thus, can no longer be discharged.

In the conclusion of Bierman's note he gives an alternate left rule
for par that he attributes to Bellin.  This new left-rule is as
follows:
\begin{center}
  \begin{math}
    \FILLdruleParl{}
  \end{math}
\end{center}
In this rule $[[let-pat z (x (+) -) t]]$ and $[[let-pat z (- (+) y) t']]$ only let-bind
$z$ in $t$ or $t'$ if $x \in FV(t)$ or $y \in FV(t')$.  Otherwise the
terms are left unaltered.  Bellin conjectured that adopting this rule
results in FILL regaining cut-elimination.  However, no proof has been
given.  

\textbf{Contributions.} In this paper our main contribution is to
confirm Bellin's conjecture by adopting his proposed rule
(Section~\ref{sec:full_intuitionistic_linear_logic_(fill)}) and
proving cut-elimination (Section~\ref{sec:cut-elimination}).  In
addition, we show that FILL can be modeled by a new form of dialectica
category called order-enriched dialectica category
(Section~\ref{sec:order-enriched_dialectica_categories}).

\textbf{Related Work.} The first formalization of FILL with
cut-elimination was due to Brauner and de Paiva \cite{Brauner:1998}.
Their formalization can be seen as a linear version of LK with a
sophisticated meta-level dependency tracking system.  A proof of a
FILL sequent in their formalization amounts to a classical derivation,
$\pi$, invariant in a what they call the FILL property:
\begin{center}
  \begin{itemize}
  \item The hypothesis discharged by an application of the implication
    right rule in $\pi$ is a dependency of only the conclusion of the
    implication being introduced.
  \end{itemize}
\end{center}
They were able to show that their formalization is sound, complete,
and enjoys cut-elimination.  The one point in favor of the term
assignment formalization given here over Brauner and de Paiva's
formalization is that the dependency tracking system complicates both
the definition of the logic and its use.  However, we do not wish to
detract from the importance of their work.

de Paiva and Pereira used annotations on the sequents of LK to arrive
at full intuitionistic logic (FIL) with multiple conclusion that
enjoys cut-elimination \cite{dePaiva:2005}. They annotate hypothesis
with natural number indices, and conclusions with finite sets of
indices.  The sets on conclusions correspond to the collection of the
hypotheses that the conclusion depends on.  Then they have a similar
property to that of the FILL property from Brauner and de Paiva's
formalization.  In fact, the dependency tracking system is very
similar to this formalization, but the dependency tracking has been
collapsed into the object language instead of being at the meta-level.
% section introduction (end)

\section{Full Intuitionistic Linear Logic (FILL)}
\label{sec:full_intuitionistic_linear_logic_(fill)}

In this section we give a brief description of FILL.  We first give
the syntax of formulas, patterns, terms, and contexts.  Following the
syntax we define several meta-functions that will be used when
defining the inference rules of the logic.

\begin{definition}
  \label{def:syntax}
  The syntax for FILL is as follows:
  \begin{center}
    \begin{math}
      \begin{array}{cll}
        \text{(Formulas)}       & [[A]], [[B]], [[C]], [[D]], [[E]] ::= [[I]] \mid [[_|_]]
        \mid [[A -o B]] \mid [[A (x) B]] \mid [[A (+) B]] \\
        \text{(Patterns)} & [[p]] ::= [[stp]] \mid [[-]] \mid [[x]] \mid [[p1 (x)
        p2]] \mid [[p1 (+) p2]]\\
        \text{(Terms)}          & [[t]], [[e]] ::= [[x]] \mid [[*]] \mid [[o]] \mid
        [[t1 (x) t2]] \mid [[t1 (+) t2]] \mid [[\x.t]] \mid [[let t be p in e]] \mid [[t1 t2]]\\
        \text{(Left Contexts)}  & [[G]] ::= [[.]] \mid [[x : A]] \mid [[G1,G2]]\\
        \text{(Right Contexts)} & [[L]] ::= [[.]] \mid [[t : A]] \mid [[L1,L2]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}

The formulas of FILL are standard, but we denote the unit of tensor as
$\top$ and the unit of par as $\perp$. Patterns are used to
distinguish between the various let-expressions for tensor, par, and
their units.  There are three different let-expressions:
\begin{center}
  \begin{math}
    \begin{array}{rll}
      \text{Tensor:} & [[let t be p1 (x) p2 in e]]\\
      \text{Par:} & [[let t be p1 (+) p2 in e]]\\
      \text{Tensor Unit:} & [[let t be stp in e]]\\
    \end{array}
  \end{math}
\end{center}
In addition, each of these will have their own equational rules, see
Figure~\ref{def:FILL-eq}.  The role each term plays in the overall
logic will become clear after we introduce the inference rules.

At this point we introduce some syntax and mete-level functions that
will be used in the definition of the inference rules for FILL. Left
contexts are multisets of formulas labeled with a variable, and right
contexts are multisets of formulas labeled with a term.  We will often
write $[[L1 | L2]]$ as syntactic sugar for $[[L1,L2]]$.  The former
should be read as ``$[[L1]]$ or $[[L2]]$.''  We denote the usual
capture-avoiding substitution by $[[ [t/x]t']]$, and its
straightforward extension to right contexts as $[[ [t/x]L]]$.
% \begin{definition}
%   \label{def:delta-sub}
%   We extend the capture-avoiding substitution function to right
%   contexts as follows:
%   \begin{center}
%     \begin{math}
%       \begin{array}{lll}
%         [[ [t/x] .]] = [[.]]\\
%         [[ [t/x] (t' : A)]] = [[{[t/x]t'} : A]]\\
%         [[ [t/x] (L1 | L2)]] = [[([t/x]L1) | ([t/x]L2)]]\\
%       \end{array}
%     \end{math}
%   \end{center}
% \end{definition}
Similarly, we find it convenient to be able to do this style of
extension for the let-binding as well.
\begin{definition}
  \label{def:delta-let}
  We extend let-binding terms to right contexts as follows:
  \begin{center}
    \begin{math}
      \begin{array}{lll}
        [[ let t be p in .]] = [[.]]\\
        [[ let t be p in (t' : A)]] = [[{let t be p in t'} : A]]\\
        [[ let t be p in (L1 | L2)]] = [[(let t be p in L1) | (let t be p in L2)]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}
\noindent
Lastly, we denote the usual function that computes the set of free
variables in a term by $\mathsf{FV}([[t]])$, and its straightforward
extension to right contexts as $\mathsf{FV}([[L]])$.
% \begin{definition}
%   \label{def:delta-FV}
%   We extend the free-variable function on terms to right contexts as
%   follows:
%   \begin{center}
%     \begin{math}
%       \begin{array}{lll}
%         [[FV(.)]] = \emptyset\\
%         [[FV(t : A)]] = [[FV(t)]]\\
%         [[FV(L1 | L2)]] = [[FV(L1)]] \cup [[FV(L2)]]\\
%       \end{array}
%     \end{math}
%   \end{center}
% \end{definition}

The inference rules for FILL are defined in Figure~\ref{def:infr}.
\begin{figure}
    \begin{center}
    \scriptsize
      \begin{mathpar}
        \FILLdruleAx{}    \and 
        \FILLdruleCut{}     \and 
        \FILLdruleIl{}            \and 
        \FILLdruleIr{}    \and 
        \FILLdruleTl{}    \and 
        \FILLdruleTr{}    \and 
        \FILLdrulePl{}    \and 
        \FILLdrulePr{}    \and 
        \FILLdruleParl{}    \and 
        \FILLdruleParr{}    \and 
        \FILLdruleImpl{}    \and 
        \FILLdruleImpr{}    \and 
        \FILLdruleExl{}    \and 
        \FILLdruleExr{}    
    \end{mathpar}
  \end{center}
  \caption{Inference rules for FILL}
  \label{def:infr}
\end{figure}
The $\FILLdrulename{Parl}$ rule depends on the function $[[let-pat z p
L]]$ which we define next.
\begin{definition}
  \label{def:let-pat-term}
  The function $[[let-pat z p t]]$ is defined as follows:
  \vspace{-15px}
  \begin{center}
    \begin{math}
      \begin{array}{lll}      
        \begin{array}{lll}
          [[let-pat z (x (+) -) t]] = [[t]]\\
          \,\,\,\,\,\,\text{where } [[x]] \not\in \mathsf{FV}([[t]])\\
        \end{array}
        & 
          \begin{array}{lll}
            [[let-pat z (- (+) y) t]] = [[t]]\\
        \,\,\,\,\,\,\text{where } [[y]] \not\in \mathsf{FV}([[t]])\\
          \end{array}
        & 
          \begin{array}{lll}
            [[let-pat z p t]] = [[let z be p in t]]\\
            & \\
          \end{array}
      \end{array}
    \end{math}
  \end{center}
  It is straightforward to extend the previous definition to
  right-contexts, and we denote this extension by $[[let-pat z p L]]$.
  % \begin{center}
  %   \begin{math}
  %     \begin{array}{lll}      
  %       [[let-pat z p .]] = [[.]]\\                
  %       [[let-pat z p (t : A)]] = [[{let-pat z p t} : A]]\\
  %       [[let-pat z p (L1 | L2)]] = [[(let-pat z p L1) | (let-pat z p L2)]]\\
  %     \end{array}
  %   \end{math}
  % \end{center}
\end{definition}
The motivation behind this function is that it only binds the pattern
variables in $[[x (+) -]]$ and $[[- (+) y]]$ if and only if those
pattern variables are free in the body of the let.  This over comes the
counterexample given by Bierman in \cite{Bierman:1996}.  Throughout
the sequel we will denote derivations of the previous rules by $\pi$.

Similarly to $\lambda$-calculi the terms of FILL are equipped with an
equivalence relation.  This equivalence on terms is defined in
Figure~\ref{def:FILL-eq}.
\begin{figure}[t]
  
  \begin{center}
    \footnotesize
    \begin{mathpar}
      \FILLdruleAlpha{} \and
      \FILLdruleEtaFun{} \and
      \FILLdruleBetaFun{} \and
      \FILLdruleEtaOneI{} \and
\begin{report}
  \FILLdruleEtaTwoI{} \and
\end{report}
      \FILLdruleBetaI{} \and
      \FILLdruleNatI{} \and
      \begin{report}
        \FILLdruleEtaTen{} \and
      \end{report}
      \FILLdruleBetaOneTen{} \and
      \FILLdruleBetaTwoTen{} \and
      \FILLdruleNatTen{} \and
      \FILLdruleEtaParU{} \and
      \FILLdruleEtaPar{} \and
      \FILLdruleBetaOnePar{} \and
      \FILLdruleBetaTwoPar{} \and
      \FILLdruleNatOnePar{} \and
      \FILLdruleNatTwoPar{} 
      \begin{report}
        \and
      \FILLdruleLam{} \and
      \FILLdruleAppOne{} \and
      \FILLdruleAppTwo{} \and
      \FILLdruleTenOne{} \and
      \FILLdruleTenTwo{} \and
      \FILLdruleParOne{} \and
      \FILLdruleParTwo{} \and
      \FILLdruleLetOne{} \and
      \FILLdruleLetTwo{} \and
      \FILLdruleRefl{} \and
      \FILLdruleSym{} \and
      \FILLdruleTrans{}
      \end{report}
    \end{mathpar}
  \end{center}
  \caption{Equivalence on terms}
  \label{def:FILL-eq}
\end{figure}
However, these rules should not be considered as computational rules,
but rather are only necessary for the cut-elimination procedure.  The
rules are highly motivated by the semantic interpretation of FILL into
symmetric monoidal categories.  There are a number of $\alpha$,
$\beta$, and $\eta$ like rules as well as several rules we call
naturality rules.  These rules are similar to the rules presented in
\cite{Hyland:1993}.
% section full_intuitionistic_linear_logic_(fill) (end)

\section{Cut-elimination}
\label{sec:cut-elimination}

FILL can be viewed from two different angles: i. as an intuitionistic
linear logic with par, or ii. as a restricted form of classical linear
logic.  Thus, to prove cut-elimination of FILL one only need to start
with the cut-elimination procedure for intuitionistic linear logic,
and then dualize all of the steps in the procedure for tensor and its
unit to obtain the steps for par and its unit.  Similarly, one could
just as easily start with the cut-elimination procedure for classical
linear logic, and then apply the restriction on the implication right
rule producing a cut-elimination procedure for FILL.

The major difference between proving cut-elimination of FILL from
classical or intuitionistic linear logic is that we must prove an
invariant across each step in the procedure.  The invariant is that if
a derivation $\pi$ is transformed into a derivation $\pi'$, then the
terms in the conclusion of the final rule applied in $\pi$ must be
equivalent to the terms in the conclusion of the final rule applied in
$\pi'$ using the rules from Figure~\ref{def:FILL-eq}.  For example,
consider the following case in the cut-elimination procedure for FILL:

\ \\
\noindent
The proof
\begin{center}
  \scriptsize
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=\tiny Parr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2 |- h(L1 | h(t1 : B | t2 : C)) | L2]]}                  
    }{[[G1,x : A,G2 |- h(L1 | h(t1 (+) t2 : B (+) C)) | L2]]}
  }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h([t/x]{t1 (+) t2} : B (+) C)) | [t/x]L2)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \scriptsize
  \begin{math}
    $$\mprset{flushleft}
\inferrule* [right=\tiny Parr] {
  $$\mprset{flushleft}
  \inferrule* [right=\tiny Cut] {
    \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2 |- h(L1 | h(t1 : B | t2 : C)) | L2]]}                  
    }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h(h{[t/x]t1} : B | h{[t/x]t2} : C)) | [t/x]L2)]]}
  }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h{[t/x]t1} (+) h{[t/x]t2} : B (+) C) | [t/x]L2)]]}
  \end{math}
\end{center}
Now we must show that $[[L]] = [[L]]$, $[[ [t/x]L1]] = [[ [t/x]L1]]$,
$[[ [t/x]{t1 (+) t2} = {[t/x]t1} (+) [t/x]t2]]$, and
$[[ [t/x]L2]] = [[ [t/x]L2]]$, but the only non-trivial case is
whether $[[ [t/x]{t1 (+) t2} = {[t/x]t1} (+) [t/x]t2]]$ holds, but
this clearly holds by a simple property of capture avoiding
substitution.  Every case of the cut-elimination procedure proceeds
just as this example does.

\begin{report}
  The cut elimination procedure requires the following two basic
results:
\begin{lemma}[Substitution Distribution]
  \label{lemma:substitution_distribution}
  For any terms $[[t]]$, $[[t1]]$, and $[[t2]]$, $[[ [t1/x][t2/y]t]] = [[ [ [t1/x]t2/y][t2/x]t]]$.
\end{lemma}
\begin{proof}
  This proof holds by straightforward induction on the form of $t$.
\end{proof}

\begin{lemma}[Let-pat Distribution]
  \label{lemma:let-pat_distribution}
  For any terms $[[t]]$, $[[t1]]$, and $[[t2]]$, and pattern p, \\
  $[[ let-pat t p [t1/y]t2]] = [[ [ let-pat t p t1/y]t2]]$.
\end{lemma}
\begin{proof}
  This proof holds by case splitting over $p$, and then using the
  naturality equations for the respective pattern.
\end{proof}
\end{report}

We finally arrive at cut-elimination.
\begin{theorem}
  \label{thm:cut-pro}
  If $[[G |- t1 : A1,...,ti : Ai]]$ steps to $[[G |- t'1 : A1,...,t'i
  : Ai]]$ using the cut-elimination procedure, then $[[tj = t'j]]$
  for $1 \leq j \leq i$.
\end{theorem}
\begin{proof}
  The cut-elimination procedure given here is the standard
  cut-elimination procedure for classical linear logic except the
  cases involving the implication right rule have the FILL
  restriction. The structure of our procedure follows the structure of
  the procedure found in \cite{Mellies:2009}. Due to space limitations
  we only show two of the most interesting cases, but for the entire
  proof see the companion report \cite{Eades:2015}.
  \begin{itemize}
    \begin{report}      
  \item[Case:] commuting conversion cut vs cut (first case).
    The following proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}
        }{[[G2,x : A,G3 |- t1 : B | L1]]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}
        }{[[G1,y : B,G4 |- L2]]}
      }{[[G1,G2,x : A,G3,G4 |- h(L1 | [t1/y]L2)]]}
    }{[[G1,G2,G,G3,G4 |- h(L | [t/x]L1) | [t/x]h([t1/y]L2)]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=] {
        $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}               
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}
        }{[[G2,x : A,G3 |- t1 : B | L1]]}
      }{[[G2,G,G3 |- h{[t/x]t1} : B | [t/x]L1]]}
      \\
      $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}
        }{[[G1,y : B,G4 |- L2]]}
    }{[[G1,G2,G,G3,G4 |- h(L | [t/x]L1) | [ [t/x]t1/y]L2]]}
  \end{math}
\end{center}
First, if $[[L2]]$ is empty, then all the terms in the conclusion of
the previous two derivations are equivalent.  
So suppose $[[L2]] = [[t2 : C | L2']]$.  Then we know that the term
$[[ [t/x][t1/y]t2]]$ in the first derivation above is equivalent to
$[[ [ [t/x] t1/y][t/x] t2]]$ by
Lemma~\ref{lemma:substitution_distribution}.  Furthermore, by
inspecting the first derivation we can see that $[[x nin FV(t2)]]$,
and thus, $[[ [ [t/x] t1/y][t/x] t2 = [ [t/x] t1/y] t2]]$.  This
argument may be repeated for any term in $[[L2']]$, and thus, we know
$[[ [t/x][t1/y]L2 = [ [t/x]t1/y]L2]]$.

\item[Case:] commuting conversion cut vs. cut (second case).  The second commuting conversion on cut begins with the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}
        }{[[G' |- t' : B | L']]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}
        }{[[G1,x : A,G2,y:B,G3 |- L1]]}
      }{[[G1,x : A,G2,G',G3 |- L' | [t'/y]L1]]}
    }{[[G1,G,G2,G',G3 |- h(L | [t/x]L') | [t/x]h([t'/y]L1)]]}
  \end{math}
\end{center}
is transformed into the following proof:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\text{\scriptsize Series of Exchanges}] {
      $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}
      }{[[G' |- t' : B | L']]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}
        }{[[G |- t : A | L]]}      
        \\
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}
        }{[[G1,x : A,G2,y:B,G3 |- L1]]}
      }{[[G1,G,G2,y:B,G3 |- L | [t/x]L1]]}
    }{[[G1,G,G2,G',G3 |- h(L' | [t'/y]L) | [t'/y]h([t/x]L1)]]}
    }{[[G1,G,G2,G',G3 |- h(h([t'/y]L) | L') | [t'/y]h([t/x]L1)]]}
  \end{math}
\end{center}
We know $[[x,y
nin
FV(L)]]$ by inspection of the first derivation, and so we know that
$[[L
= [t'/y]L]]$ and $[[L' =
[t/x]L']]$.  Without loss of generality suppose $[[L1]] = [[t1 : C |
L'1]]$. Then we know that $[[x,y nin FV(t)]]$ and $[[x,y nin
FV(t')]]$.  Thus, by this fact and
Lemma~\ref{lemma:substitution_distribution}, we know that $[[
[t/x][t'/y]t1 = [ [t/x]t'/y][t/x]t1]] = [[ [t'/y][t/x]t1
]]$.  This argument can be repeated for any term in
$[[L'1]]$, hence, $[[ [t/x][t'/y]L1 = [t'/y][t/x]L1]]$.

\item[Case:] the $\eta$-expansion cases: tensor.  
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Ax] {
      \,
    }{[[x : A (x) B |- x : A (x) B]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Tl] {
      $$\mprset{flushleft}
      \inferrule* [right=Tr] {
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[y : A |- y : A]]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[z : B |- z : B]]}
      }{[[y : A, z : B |- y (x) z : A (x) B]]}
    }{[[x : A (x) B |- h{let x be y (x) z in {y (x) z}} : A (x) B]]}
  \end{math}
\end{center}
By the rule $\FILLdrulename{EQ\_EtaTensor}$
we know $[[let x be y (x) z in {y (x) z} = x]]$.

\item[Case:] the $\eta$-expansion cases: par.  
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Ax] {
      \,
    }{[[x : A (+) B |- x : A (+) B]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Parr] {
      $$\mprset{flushleft}
      \inferrule* [right=Parl] {
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[y : A |- y : A]]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[z : B |- z : B]]}
      }{[[x : A (+) B |- h{let x be (y (+) -) in y} : A | h{let x be (- (+) z) in z} : B]]}
    }{[[x : A (+) B |- {let x be (y (+) -) in y} (+) {let x be (- (+) z) in z} : A (+) B]]}
  \end{math}
\end{center}
By rule $\FILLdrulename{Eq\_EtaPar}$ we know
$[[{{let x be (y (+) -) in y} (+) {let x be (- (+) z) in z}} = x]]$.

\item[Case:] the $\eta$-expansion cases: implication.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Ax] {
      \,
    }{[[x : A -o B |- x : A -o B]]}
  \end{math}
\end{center}
transforms into the proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=ImpR] {
      $$\mprset{flushleft}
      \inferrule* [right=ImpL] {
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[y : A |- y : A]]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          \,
        }{[[z : B |- z : B]]}
      }{[[y : A, x : A -o B |- x y : B]]}
    }{[[x : A -o B |- \y.h{x y} : A -o B]]}
  \end{math}  
\end{center}
All terms in the two derivations are equivalent, because
$[[{\y.h{x y}} = x]]$ by the $\FILLdrulename{Eq\_EtaFun}$ rule.

\item[Case:] the $\eta$-expansion cases: tensor unit.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Ax] {
      \,
    }{[[x : I |- x : I]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Il] {
      $$\mprset{flushleft}
      \inferrule* [right=Ir] {
        \,
      }{[[. |- * : I]]}
    }{[[x : I |- h{let x be stp in *} : I]]}
  \end{math}
\end{center}
We know $[[x = let x be stp in *]]$ by
$\FILLdrulename{Eq\_EtaI}$.  

\item[Case:] the $\eta$-expansion cases: par unit.
  The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Ax] {
      \,
    }{[[x : _|_ |- x : _|_]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Pr] {
      $$\mprset{flushleft}
      \inferrule* [right=Pl] {
        \,
      }{[[x : _|_ |- .]]}
    }{[[x : _|_ |- o : _|_]]}
  \end{math}
\end{center}
We know $[[x = o]]$ by $\FILLdrulename{Eq\_EtaParU}$.

\item[Case:] the axiom steps: the axiom step.
The proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Ax] {
        \,
      }{[[x : A |- x : A]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
      }{[[G1,y : A, G2 |- L]]}
    }{[[G1,x : A, G2 |- [x/y]L]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
      }{[[G1,y : A, G2 |- L]]}
  \end{math}
\end{center}
By $\FILLdrulename{Eq\_Alpha}$, we know, for any $[[t]]$ in
$[[L]]$, $[[t = [x/y]t]]$, and hence $[[L = [x/y]L]]$.

\item[Case:] the axiom steps: conclusion vs. axiom.
The proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
      }{[[G |- t : A | L]]}
      \,
      $$\mprset{flushleft}
      \inferrule* [right=Ax] {
        \,
      }{[[x : A |- x : A]]}
    }{[[G |- L | h{[t/x]x} : A]]}
  \end{math}
\end{center}
transforms into 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\text{\tiny Series of Exchanges}] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
      }{[[G |- t : A | L]]}
    }{[[G |- L | t : A ]]}
  \end{math}
\end{center}
By the definition of the substitution function we know $[[t =
[t/x]x]]$.

\item[Case:] the exchange steps: conclusion vs. left-exchange (the
  first case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Exl] {        
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, y : B, G2 |- L']]}        
      }{[[G1,y : B,x : A, G2 |- L']]}
    }{[[G1,y : B,G, G2 |- L | [t/x]L']]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\text{Series of Exchanges}] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : A | L]]}
      \\
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, y : B, G2 |- L']]}        
      }{[[G1,G,y : B, G2 |- L | [t/x]L']]}
    }{[[G1,y : B,G, G2 |- L | [t/x]L']]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.  

\item[Case:] the exchange steps: conclusion vs. left-exchange (the
  second case). The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : B | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Exl] {        
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, y : B, G2 |- L']]}        
      }{[[G1,y : B,x : A, G2 |- L']]}
    }{[[G1,G, x : A,G2 |- L | [t/y]L']]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\text{Series of Exchanges}] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : B | L]]}
      \\
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, y : B, G2 |- L']]}        
      }{[[G1,x : A,G,G2 |- L | [t/y]L']]}
    }{[[G1,G,x : A,G2 |- L | [t/y]L']]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.

\item[Case:] the exchange steps: conclusion vs. right-exchange
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Exr] {
        $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, G2 |- h(h(L1 | t1 : B) | t2 : C) | L']]}        
      }{[[G1,x : A, G2 |- h(h(L1 | t2 : C) | t1 : B) | L']]}
    }{[[G1,G,G2 |- L | h(h(h(h([t/x]L1) | h{[t/x]t2} : C) | h{[t/x]t1} : B) | [t/x]L')]]}
  \end{math}
\end{center}
transforms into this proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Exr] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G |- t : A | L]]}
      \\
      $$\mprset{flushleft}
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, G2 |- h(h(L1 | t1 : B) | t2 : C) | L']]}        
      }{[[G1,G, G2 |- L | h(h(h(h([t/x]L1) | h{[t/x]t1} : B) | h{[t/x]t2} : C) | [t/x]L')]]}
    }{[[G1,G, G2 |- h(h(h([t/x]L1) | h{[t/x]t2} : C) | h{[t/x]t1} : B) | [t/x]L']]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.  
  
\item[Case:] principal formula vs. principal formula: tensor.
The proof 
\begin{center} 
    \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\footnotesize Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=\footnotesize Tr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G1 |- t1 : A | L1]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
      }{[[G2 |- t2 : B | L2]]}
      }{[[G1,G2 |- t1 (x) t2 : A (x) B | h(L1 | L2)]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=\footnotesize Tl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,x : A, y : B,G4 |- L3]]}
      }{[[G3,z : A (x) B,G4 |- h(let z be x (x) y in L3)]]}
    }{[[G3,G1,G2,G4 |- h(L1 | L2) | [t1 (x) t2/z](h(let z be x (x) y in L3))]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G1 |- t1 : A | L1]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
      }{[[G2 |- t2 : B | L2]]}
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,x : A, y : B,G4 |- L3]]}
      }{[[G3,x : A, G2,G4 |- L2 | [t2/y]L3]]}
    }{[[G3,G1, G2,G4 |- h(L1 | L2) | [t1/x][t2/y]L3]]}
  \end{math}
\end{center}
Without loss of generality suppose $[[L3 = t3
: C, L'3]]$.  We can see that $[[h{[t1 (x) t2/z]{let z be x (x) y in
    t3}} = let t1 (x) t2 be x (x) y in t3]]$ by the definition of
substitution, and by using the $\FILLdrulename{Eq\_Beta1Tensor}$ rule we obtain
$[[let t1 (x) t2 be x (x) y in t3 = [t1/x][t2/y]t3]]$.  This argument
can be repeated for any term in $[[ [t1 (x) t2/z](h(let z be x (x) y
in L'3))]]$, and thus, $[[ [t1 (x) t2/z](h(let z be x (x) y in L3)) =
[t1/x][t2/y]L3]]$.

Note that in the second derivation of the above transformation we
first cut on $[[B]]$, and then $[[A]]$, but we could have cut on
$[[A]]$ first, and then $[[B]]$, but this would yeild equivalent
derivations as above by using
Lemma~\ref{lemma:substitution_distribution}.
\end{report}
  
\item[Case:] principal formula vs. principal formula: par.
The proof
\begin{center}
  \scriptsize
    \begin{math}    
    $$\mprset{flushleft}
\inferrule* [right=\tiny Cut] {
  $$\mprset{flushleft}
  \inferrule* [leftskip=15px,left=\tiny Parr,rightskip=10px] {
    \inferrule* [] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
      }{[[G1 |- h(L1 | t1 : A) | h(t2 : B | L2)]]}
    }{[[G1 |- h(L1 | t1 (+) t2 : A (+) B) | L2]]}
  \\
  $$\mprset{flushleft}
  \inferrule* [leftskip=5px,right=\tiny Parl,rightskip=30px] {
    \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
      }{[[G2,x : A |- L3]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
      }{[[G3, y : B |- L4]]}
  }{[[G2,G3,z : A (+) B |- h(let-pat z (x (+) -) L3) | h(let-pat z (- (+) y) L4)]]}
}{[[G2,G3,G1 |- h(h(L1 | L2) | h([t1 (+) t2/z](let-pat z (x (+) -) L3))) | h([t1 (+) t2/z](let-pat z (- (+) y) L4))]]}
  \end{math}    
\end{center}
is transformed into the proof
\begin{center}
  \scriptsize
  \begin{math}    
    $$\mprset{flushleft}
    \inferrule* [right=  \scriptsize \tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=  \scriptsize Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=  \scriptsize Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G1 |- h(L1 | t1 : A) | h(t2 : B | L2)]]}
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3, y : B |- L4]]}
      }{[[G3, G1 |- h(h(L1 | t1 : A) | L2) | [t2/y]L4]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G2,x : A |- L3]]}
    }{[[G2,G3,G1 |- h(h(L1 | L2) | [t2/y]L4) | [t1/x]L3]]}
    }{[[G2,G3,G1 |- h(L1 | L2) | h(h([t1/x]L3) | [t2/y]L4)]]}
  \end{math}
\end{center}
Without loss of generality consider the case when
$[[L3]] = [[t3 : C_1 | L'3]]$ and $[[L4]] = [[t4 : C_2 | L'4]]$.  First,
$[[ [t1 (+) t2/z]{let-pat z (x (+) -) t3} = let-pat {t1 (+) t2} (x (+)
-) t3]]$,
and by $\FILLdrulename{Eq\_Beta1Par}$ we know
$[[let-pat {t1 (+) t2} (x (+) -) t3 = [t1/x]t3]]$ if $[[x in FV(t3)]]$
or $[[let-pat {t1 (+) t2} (x (+) -) t3 = t3]]$ otherwise.  In the
latter case we can see that $[[t3 = [t1/x]t3]]$, thus, in both cases
$[[let-pat {t1 (+) t2} (x (+) -) t3 = [t1/x]t3]]$.  This argument can
be repeated for any terms in $[[L'3]]$, and hence
$[[ [t1 (+) t2/z](let-pat z (x (+) -) L3)]] = [[let-pat {t1 (+) t2} (x
(+) -) L3 = [t1/x]L3]]$.
We can apply a similar argument for
$[[ [t1 (+) t2/z]{let-pat z (- (+) y) t4}]]$ and
$[[ [t1 (+) t2/z](let-pat z (- (+) y) L4)]]$.

\begin{paper}
  Note that we could have first cut on $[[A]]$, and then on $[[B]]$ in
  the second derivation, but we would have arrived at the same result
  just with potentially more exchanges on the right.
\end{paper}
\begin{report}
  Note that just as we mentioned about tensor we could have first cut on
$[[A]]$, and then on $[[B]]$ in the second derivation, but we would
have arrived at the same result just with potentially more exchanges
on the right.
\end{report}

  \item[Case:] principal formula vs. principal formula: implication.
The proof
\begin{center}
  \scriptsize
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\scriptsize Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Impr] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G, x : A |- t : B | L]]}
        \\
        [[x nin FV(L)]]
      }{[[G |- \x.t : A -o B | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Impl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1 |- t1 : A | L1]]}
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2, y : B |- L2]]}
      }{[[G1, z : A -o B,G2 |- L1 | [z t1/y]L2]]}
    }{[[G1,G,G2 |- L | h(h([\x.t/z]L1) | h([\x.t/z][z t1/y]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \scriptsize
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=\scriptsize Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Cut] {
        \inferrule* [right=,rightskip=17px] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1 |- t1 : A | L1]]}
        \\
        \inferrule* [right=,rightskip=13px] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G, x : A |- t : B | L]]}
        \\
        [[x nin FV(L)]]
      }{[[G, G1 |- L1 | h(h{[t1/x]t} : B | [t1/x]L)]]}
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2, y : B |- L2]]}
      }{[[G2, G,G1 |- h(L1 | [t1/x]L) | [ [t1/x]t/y]L2]]}
    }{[[G1, G,G2 |- h([t1/x]L) | h(L1 | h([ [t1/x]t/y]L2))]]}
  \end{math}
\end{center}
Without loss of generality consider the case when $[[L2]] = [[t2 : C | L'2]]$. 
First, by hypothesis we know $[[x nin FV(L)]]$, and so we know $[[L = [t1/x]L]]$.  We can see
that $[[ [\x.t/z][z t1/y]t2 = [{\x.t} t1/y]t2]] = [[ [ [t1/x]t/y]t2]]$ by using the congruence rules
of equality and the rule $\FILLdrulename{Eq\_BetaFun}$.  This argument can be repeated for any term
in $[[ [\x.t/z][z t1/y]L'2]]$, and so $[[ [\x.t/z][z t1/y]L2 = [ [t1/x]t/y]L2]]$.  Finally, by inspecting the previous
derivations we can see that $[[z nin FV(L1)]]$, and thus, $[[L1 =
[\x.t/z]L1]]$.  

\begin{report}
\item[Case:] principal formula vs. principal formula: tensor unit.
    The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Ir] {
        \,
      }{[[. |- * : I]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Il] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
        }{[[G |- L]]}
      }{[[G, x : I |- let x be stp in L]]}
    }{[[G |- [*/x](let x be stp in L)]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    \inferrule* [right=] {
      \inferrule* [right=,vdots=1.5em,fraction=\,] {
        \,
      }{\pi}          
    }{[[G |- L]]}
  \end{math}
\end{center}

Without loss of generality suppose $[[L]] = [[t : A | L']]$. We can see that 
$[[ [*/x]{let x be stp in t} = let * be stp in t]] = [[t]]$ by the definition of 
substitution and the $\FILLdrulename{Eq\_EtaI}$ rule.  This argument can be repeated for any
term in $[[ [*/x](let x be stp in L')]]$, and hence, $[[ [*/x](let x be
stp in L) = L]]$.

\item[Case:] principal formula vs. principal formula: par unit.
  The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Pr] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi}          
        }{[[G |- L]]}
      }{[[G |- o : _|_ | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Pl] {
        \,
      }{[[x : _|_ |- .]]}
    }{[[G |- L | [o/x].]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    \inferrule* [right=] {
      \inferrule* [right=,vdots=1.5em,fraction=\,] {
        \,
      }{\pi}          
    }{[[G |- L]]}
  \end{math}
\end{center}
Clearly, $[[ [o/x]. = .]]$.

\item[Case:] secondary conclusion: left introduction of implication.
The proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Impl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t1 : A | L]]}
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : B,G2 |- t2 : C | L2]]}
      }{[[G,y : A -o B,G1,G2 |- h(L | h([y t1/x]t2 : C)) | [y t1/x]L2]]}
      \\      
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,z : C, G4 |- L3]]}
      }{[[G3,G,y : A -o B,G1,G2,G4 |- L | h(h([y t1/x]L2) | [ [y t1/x]t2/z]L3)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Impl] {
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t1 : A | L]]}
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : B,G2 |- t2 : C | L2]]}
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,z : C, G4 |- L3]]}
      }{[[G3,G1, x : B,G2,G4 |-L2 | [t2/z]L3]]}
    }{[[G, y : A -o B,G3,G1,G2,G4 |- h(L | h([y t1/x]L2)) | [y t1/x][t2/z]L3]]}
  }{[[G3, G,y : A -o B,G1,G2,G4 |- h(L | h([y t1/x]L2)) | [y t1/x][t2/z]L3]]}
  \end{math}
\end{center}
This case is similar to
Section~\ref{subsec:commuting_conversion_cut_vs_cut_(first_case)}.
Thus, we can prove that $[[ [y t1/x][t2/z]L3 = [ [y t1/x]t2/z]L3]]$ by
Lemma~\ref{lemma:substitution_distribution} and the fact that $[[x nin
FV(L3)]]$.

\item[Case:] secondary conclusion: left introduction of exchange.
  The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Exl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G,y : B, x : A, G' |- t : C | L]]}        
      }{[[G, x : A, y : B, G' |- t : C | L]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,z : C, G2 |- L2]]}
    }{[[G1,G, x : A, y : B, G', G2 |- L | [t/z]L2]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Exl] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G,y : B, x : A, G' |- t : C | L]]}        
        \\
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,z : C, G2 |- L2]]}
    }{[[G1,G,y : B, x : A, G', G2 |- L | [t/z]L2]]}
  }{[[G1,G, x : A, y : B, G', G2 |- L | [t/z]L2]]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.

\item[Case:] secondary conclusion: left introduction of tensor.
The proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Tl] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G, x : A, y : B |- t : C | L]]}      
      }{[[G, z : A (x) B |- h{let z be x (x) y in t} : C | let z be x (x) y in L]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,w : C, G2 |- L2]]}
    }{[[G1,G, z : A (x) B, G2 |- h(let z be x (x) y in L) | [h{let z be x (x) y in t}/w]L2]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Tl] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G, x : A, y : B |- t : C | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,w : C, G2 |- L2]]}
    }{[[G1,G, x : A, y : B, G2 |- L | [t/w]L2]]}      
  }{[[G1,G, z : A (x) B, G2 |- h(let z be x (x) y in L) | let z be x (x) y in ([t/w]L2)]]}
  \end{math}
\end{center}
It suffices to show that $[[let z be x (x) y in ([t/w]L2) = [h{let z
  be x (x) y in t}/w]L2]]$.  This is a simple consequence of the rule
\FILLdrulename{Eq\_NatTensor}.

\item[Case:] secondary conclusion: left introduction of Par
The proof 
\begin{center}
  \scriptsize
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\scriptsize Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Parl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G, x : A |- L]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G', y : B |- t' : C | L']]}      
      }{[[G,G',z : A (+) B |- h(h(let-pat z (x (+) -) L) | h{let-pat z (- (+) y) t'} : C) | h(let-pat z (- (+) y) L')]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G1,w : C, G2 |- L2]]}
    }{[[G1,G,G',z : A (+) B, G2 |- h(h(let-pat z (x (+) -) L) | h(let-pat z (- (+) y) L')) | [h{let-pat z (- (+) y) t'}/w]L2 ]]}
  \end{math}
\end{center}
is transformed into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Parl] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G, x : A |- L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G', y : B |- t' : C | L']]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G1,w : C, G2 |- L2]]}
      }{[[G1,G', y : B, G2 |- L' | [t'/w]L2]]}
    }{[[G,G1,G', G2, z : A (+) B |- h(h(let-pat z (x (+) -) L) | h(let-pat z (- (+) y) L')) | h(let-pat z (- (+) y) [t'/w]L2)]]}
  }{[[G1,G,G',z : A (+) B,G2 |- h(h(let-pat z (x (+) -) L) | h(let-pat z (- (+) y) L')) | h(let-pat z (- (+) y) [t'/w]L2)]]}
  \end{math}
\end{center}
It suffices to show that $[[let-pat z (- (+) y) [t'/w]L2]] = [[
[h{let-pat z (- (+) y) t'}/w]L2]]$.  This follows from the rule
$\FILLdrulename{Eq\_Nat2Par}$.

\item[Case:] secondary conclusion: left introduction of tensor unit.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      $$\mprset{flushleft}
      \inferrule* [right=Il] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : C | L]]}      
      }{[[G, x : I |- t : C | L]]}
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,w : C, G2 |- L1]]}
      }{[[G1,G,x : I,G2 |- L | [t/w]L1]]}
  \end{math}
\end{center}
is transformed into the following:
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Il] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : C | L]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,w : C, G2 |- L1]]}  
      }{[[G1,G, G2 |- L | [t/w]L1]]}
    }{[[G1,G, G2, x : I |- L | [t/w]L1]]}
  }{[[G1,G, x : I,G2 |- L | [t/w]L1]]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.  Note that we do not give a case
for secondary conclusion of the left introduction of par's unit,
because it can only be introduced given an empty right context, and
thus there is no cut formula.

\item[Case:] secondary hypothesis: left introduction of tensor.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Tl] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2,y : B,z : C,G3 |- t1 : D | L1]]}                  
    }{[[G1,x : A,G2,w : B (x) C,G3 |- h{let w be y (x) z in t1} : D | let w be y (x) z in L1]]}
  }{[[G1,G,G2,w : B (x) C,G3 |- L | h(h{[t/x]{let w be y (x) z in t1}} : D | [t/x](let w be y (x) z in L1))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Tl] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2,y : B,z : C,G3 |- t1 : D | L1]]}                  
    }{[[G1,G,G2,y : B,z : C,G3 |- h(L | h{[t/x]t1} : D) | [t/x]L1]]}
  }{[[G1,G,G2,w : B (x) C,G3 |- h(h(let w be x (x) y in L) | h{let w be x (x) y in [t/x]t1} : D) | let w be x (x) y in [t/x]L1]]}
  \end{math}
\end{center}
First, we can see by inspection of the previous derivations that
$[[x,y nin FV(L)]]$, thus, by using similar reasoning as above we can
use the $\FILLdrulename{EtaTensor}$ rule to obtain $[[let w be x (x) y in
L = L]]$.  It is a well-known property of substitution that 
$[[ [t/x]{let w be x (x) y in t1}]] = [[let [t/x]w be x (x) y in
[t/x]t1]] = [[let w be x (x) y in [t/x]t1]]$.

\item[Case:] secondary hypothesis: right introduction of tensor (first
  case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Tr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A, G2 |- t1 : B | L1]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G3 |- t2 : C | L2]]}      
      }{[[G1,x :A,G2,G3 |- t1 (x) t2 : B (x) C | h(L1 | L2)]]}
    }{[[G1,G,G2,G3 |- L | h(h{[t/x]{t1 (x) t2}} : B (x) C | h(h([t/x]L1) | [t/x]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Tr] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A, G2 |- t1 : B | L1]]}      
    }{[[G1,G, G2 |- L | h(h{[t/x]t1} : B | [t/x]L1)]]}
    \\
    \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G3 |- t2 : C | L2]]}      
    }{[[G1,G, G2,G3 |- h(h{[t/x]t1} (x) t2 : B (x) C) | h(L | h(h([t/x]L1) | L2))]]}
  }{[[G1,G, G2,G3 |- L | h(h({[t/x]t1} (x) t2 : B (x) C) | h(h([t/x]L1) | L2))]]}
  \end{math}
\end{center}
By inspection of the previous derivations we can see that $[[x nin
FV(t2)]]$ and $[[x nin FV(L2)]]$.  Thus, $[[ [t/x]L2 = L2]]$ and
$[[ [t/x]{t1 (x) t2} = {[t/x]t1} (x) {[t/x]t2}]] = [[{[t/x]t1} (x)
t2]]$.

\item[Case:] secondary hypothesis: right introduction of tensor
  (second case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Tr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1 |- t1 : B | L1]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G2,x : A, G3  |- t2 : C | L2]]}      
      }{[[G1,G2,x :A,G3 |- t1 (x) t2 : B (x) C | h(L1 | L2)]]}
    }{[[G1,G,G2,G3 |- L | h(h{[t/x]{t1 (x) t2}} : B (x) C | h(h([t/x]L1) | [t/x]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
      \inferrule* [right=Tr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1 |- t1 : B | L1]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G2,x : A, G3 |- t2 : C | L2]]}      
    }{[[G2,G, G3 |- L | h(h{[t/x]t2} : C | [t/x]L2)]]}       
    }{[[G1,G2,G,G3 |- h(t1 (x) {[t/x]t2} : B (x) C) | h(L1 | h(L | [t/x]L2))]]}
  }{[[G1,G, G2,G3 |- L | h(h(t1 (x) {[t/x]t2} : B (x) C) | h(L1 | h([t/x]L2)))]]}
  \end{math}
\end{center}
This case is similar to the previous case.  

\item[Case:] secondary hypothesis: right introduction of par.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Parr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2 |- h(L1 | h(t1 : B | t2 : C)) | L2]]}                  
    }{[[G1,x : A,G2 |- h(L1 | h(t1 (+) t2 : B (+) C)) | L2]]}
  }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h([t/x]{t1 (+) t2} : B (+) C)) | [t/x]L2)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
\inferrule* [right=Parr] {
  $$\mprset{flushleft}
  \inferrule* [right=Cut] {
    \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2 |- h(L1 | h(t1 : B | t2 : C)) | L2]]}                  
    }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h(h{[t/x]t1} : B | h{[t/x]t2} : C)) | [t/x]L2)]]}
  }{[[G1,G,G2 |- L | h(h(h([t/x]L1) | h{[t/x]t1} (+) h{[t/x]t2} : B (+) C) | [t/x]L2)]]}
  \end{math}
\end{center}
Clearly, $[[ [t/x]{t1 (+) t2} = {[t/x]t1} (+) [t/x]t2]]$.

\item[Case:] secondary hypothesis: left introduction of par (first
  case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Parl] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2,y : B |- L1]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G3,z : C |- L2]]}      
      }{[[G1,x : A,G2,G3,w : B (+) C |- h(let-pat w (y (+) -) L1) | h(let-pat w (- (+) z) L2)]]}
    }{[[G1,G,G2,G3,w : B (+) C |- L | h(h([t/x](let-pat w (y (+) -) L1)) | h([t/x](let-pat w (- (+) z) L2)))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=ParL] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2,y : B |- L1]]}      
      }{[[G1,G,G2,y : B |- L | [t/x]L1]]}
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G3,z : C |- L2]]}      
    }{[[G1,G,G2,G3,w : B (+) C |- h(h(let-pat w (y (+) -) L) | h(let-pat w (y (+) -) [t/x]L1)) | let-pat w (- (+) z) L2]]}
  \end{math}
\end{center}
First, by inspection of the previous proofs we can see that $[[x nin
FV(L)]]$ and $[[x nin FV(L2)]]$.  Thus, $[[let-pat w (y (+) -) L =
L]]$, and $[[ [t/x](let-pat w (- (+) z) L2) = let-pat w (- (+) z)
L2]]$. It suffices to show that $[[ [t/x](let-pat w (y (+) -) L1) =
let-pat w (y (+) -) [t/x]L1]]$ but this easily follows from a simple
distributing the substitution into the let-pat, and then
simplifying using the fact that $w \neq x$.
\item[Case:] secondary hypothesis: left introduction of par (second
  case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Parl] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,y : B |- L1]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G2,x : A,G3,z : C |- L2]]}      
      }{[[G1,G2,x : A,G3,w : B (+) C |- h(let-pat w (y (+) -) L1) | h(let-pat w (- (+) z) L2)]]}
    }{[[G1,G2,G,G3,w : B (+) C |- L | h(h([t/x](let-pat w (y (+) -) L1)) | h([t/x](let-pat w (- (+) z) L2)))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Parl] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,y : B |- L1]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_3}          
      }{[[G2,x : A,G3,z : C |- L2]]}      
    }{[[G2,G,G3,z : C |- L | [t/x]L2]]}
    }{[[G1,G2,G,G3,w : B (+) C |- h(let-pat w (y (+) -) L1) | h(h(let-pat w (- (+) z) L) | h(let-pat w (- (+) z) [t/x]L2))]]}
  \end{math}
\end{center}

Similar to the previous case.

\item[Case:] secondary hypothesis: left introduction of implication
  (first case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Impl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A,G2 |- t1 : B | L1]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,y : C |- L2]]}      
      }{[[G1,x:A,G2,G3,z : B -o C |- L1 | [z t1/y]L2]]}
    }{[[G1,G,G2,G3,z : B -o C |- L | h(h([t/x]L1) | [t/x]h([z t1/y]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Impl] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A,G2 |- t1 : B | L1]]}      
      }{[[G1,G,G2 |- h(L | h{[t/x]t1} : B) | [t/x]L1]]}
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G3,y : C |- L2]]}      
    }{[[G1,G,G2,G3, z : B -o C |- h(L | h([t/x]L1)) | [z {[t/x]t1}/y]L2]]}
  \end{math}
\end{center}
By inspection of the above derivations we can see that $[[x nin
FV(L2)]]$, and hence, by this fact and substitution distribution
(Lemma~\ref{lemma:substitution_distribution}) we know 
$[[ [t/x]h([z t1/y]L2) = h([{[t/x]z} {[t/x]t1}/y][t/x]L2)]] = [[h([z {[t/x]t1}/y]L2)]]$.

\item[Case:] secondary hypothesis: left introduction of implication
  (second case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Impl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1 |- t1 : B | L1]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2,x : A,G3,y : C |- L2]]}      
      }{[[G1,G2,x:A,G3,z : B -o C |- L1 | [z t1/y]L2]]}
    }{[[G1,G2,G,G3,z : B -o C |- L | h(h([t/x]L1) | [t/x]h([z t1/y]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Impl] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1 |- t1 : B | L1]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2,x : A,G3,y : C |- L2]]}      
      }{[[G2,G,G3,y : C |- L | [t/x]L2]]}
    }{[[G1,G2,G,G3,z : B -o C |- L1 | h(h([z t1/y]L) | h([z t1/y][t/x]L2))]]}
  }{[[G1,G2,G,G3,z : B -o C |- h(h([z t1/y]L) | h(L1 | h([z t1/y][t/x]L2)))]]}
  \end{math}
\end{center}
By inspection of the above proofs we can see that $[[y nin
FV(L)]]$. Thus, $[[ [z t1/y]L = L]]$.  The same can be said for the
variable $[[x]]$ and context $[[L1]]$, and hence, $[[ [t/x]L1 = L1]]$.
Finally, by inspection of the above proofs $[[x nin FV(t1)]]$ and so
by substitution distribution
(Lemma~\ref{lemma:substitution_distribution}) we know $[[ [t/x]h([z
t1/y]L2) = [z t1/y][t/x]L2]]$.

\item[Case:] secondary hypothesis: left introduction of implication
  (third case).
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Impl] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1 |- t1 : B | L1]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2,y : C,G3,x : A |- L2]]}      
      }{[[G1,G2,z : B -o C,G3,x:A |- L1 | [z t1/y]L2]]}
    }{[[G1,G2,z : B -o C,G3,G |- L | h(h([t/x]L1) | [t/x]h([z t1/y]L2))]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Impl] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1 |- t1 : B | L1]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_3}          
        }{[[G2,y : C,G3,x : A |- L2]]}      
      }{[[G2,y : C,G3,G |- L | [t/x]L2]]}
    }{[[G1,G2,z : B -o C,G3,G |- L1 | h(h([z t1/y]L) | h([z t1/y][t/x]L2))]]}
  }{[[G1,G2,z : B -o C,G3,G |- h(h([z t1/y]L) | h(L1 | h([z t1/y][t/x]L2)))]]}
  \end{math}
\end{center}
Similar to the previous case.

\item[Case:] secondary hypothesis: right introduction of implication.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_1}          
      }{[[G |- t : A | L]]}      
      \\
      $$\mprset{flushleft}
      \inferrule* [right=Impr] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
          \,
        }{\pi_2}          
      }{[[G1,x : A,G2,y : B |- t1 : C | L1]]}      
      \\
      [[y nin FV(L1)]]
      }{[[G1,x : A,G2 |- \y.t1 : B -o C | L1]]}
    }{[[G1,G,G2 |- L | h(h{[t/x]{\y.t1}} : B -o C | [t/x]L1)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Impr] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\        
          \inferrule* [right=] {
            \inferrule* [right=,vdots=1.5em,fraction=\,] {
              \,
            }{\pi_2}          
          }{[[G1,x : A,G2,y : B |- t1 : C | L1]]}      
        }{[[G1,G,G2,y : B |- L | h(h{[t/x]t1} : C | [t/x]L1)]]}
      }{[[G1,G,G2 |- L | h(h{\y.[t/x]t1} : B -o C | [t/x]L1)]]}
    \end{math}
  \end{center}
Clearly, $[[ [t/x]{\y.t1} = \y.[t/x]t1]]$.

\item[Case:] secondary hypothesis: left introduction of tensor unit.
The proof 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Il] {
          \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : A, G2 |- L1]]}      
      }{[[G1,x:A,G2,y : I |- let y be stp in L1]]}
    }{[[G1,G,G2,y : I |- L | [t/x](let y be stp in L1)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Il] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : A, G2 |- L1]]}      
      }{[[G1, G, G2 |- L | [t/x]L1]]}
    }{[[G1, G, G2, y : I |- h(let y be stp in L) | let y be stp in [t/x]L1]]}
  \end{math}
\end{center}
It suffices to show that $[[L]] = [[let y be stp in L]]$ and
$[[ [t/x](let y be stp in L1)]] = [[let y be stp in [t/x]L1]]$.
Without loss of generality suppose $[[L]] = [[t : B, L']]$.  We know
that it must be the case that $[[y nin FV(t)]]$, and we know that
$[[ [y/z]t]] = [[t]]$ when $[[z nin FV(t)]]$.  Then by
$\FILLdrulename{Eq\_Eta2I}$ we have $[[t]] = [[let y be stp in t]]$.  This
argument can be repeated for any other term in $[[L']]$.  Thus,
$[[L]] = [[let y be stp in L]]$.  It is easy to see that
$[[ [t/x](let y be stp in L1)]] = [[let y be stp in [t/x]L1]]$ using
the rule $\FILLdrulename{Eq\_NatI}$.

\item[Case:] secondary hypothesis: right introduction of par unit.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Pr] {
          \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, G2 |- L1]]}      
        }{[[G1,x : A, G2 |- o : _|_ | L1]]}
      }{[[G1,G, G2 |- L | h(h{[t/x]o} : _|_ | [t/x]L1)]]}
  \end{math}
\end{center}
transforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=\tiny Series of Exchanges] {
      $$\mprset{flushleft}
    \inferrule* [right=Pr] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        \inferrule* [right=] {
          \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A, G2 |- L1]]}      
      }{[[G1,G, G2 |- L | [t/x]L1]]}
    }{[[G1,G, G2 |- o : _|_ | h(L | [t/x]L1)]]}
  }{[[G1,G, G2 |- L | h(o : _|_ | [t/x]L1)]]}
  \end{math}
\end{center}
Clearly, $[[ [t/x]o = o]]$.

\item[Case:] secondary hypothesis: left introduction of exchange.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Exl] {
          \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A,G2, w : B, y : C, G3 |- L1]]}      
      }{[[G1,x : A,G2, y : C, w : B, G3 |- L1]]}
    }{[[G1,G,G2, y : C, w : B, G3 |- L | [t/x]L1]]}
  \end{math}
\end{center}
tranforms into the proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Exl] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1,x : A,G2, w : B, y : C, G3 |- L1]]}      
      }{[[G1,G,G2, w : B, y : C, G3 |- L | [t/x]L1]]}
    }{[[G1,G,G2, y : C, w : B,G3 |- L | [t/x]L1]]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.

\item[Case:] secondary hypothesis: right introduction of exchange.
The proof
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Cut] {
      \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        $$\mprset{flushleft}
        \inferrule* [right=Exr] {
          \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : A, G2 |- L1 | h(h(t1 : B | t2 : C) | L2)]]}      
      }{[[G1, x : A, G2 |- L1 | h(h(t2 : C | t1 : B) | L2)]]}
    }{[[G1, G, G2 |- L | h(h([t/x]L1) | h(h(h{[t/x]t2} : C | h{[t/x]t1} : B) | [t/x]L2))]]}
  \end{math}
\end{center}
is transformed into 
\begin{center}
  \begin{math}
    $$\mprset{flushleft}
    \inferrule* [right=Exr] {
      $$\mprset{flushleft}
      \inferrule* [right=Cut] {
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_1}          
        }{[[G |- t : A | L]]}      
        \\
        \inferrule* [right=] {
        \inferrule* [right=,vdots=1.5em,fraction=\,] {
            \,
          }{\pi_2}          
        }{[[G1, x : A, G2 |- L1 | h(h(t1 : B | t2 : C) | L2)]]}      
      }{[[G1, G, G2 |- L | h(h([t/x]L1) | h(h(h{[t/x]t1} : B | h{[t/x]t2} : C) | [t/x]L2))]]}
    }{[[G1, G, G2 |- L | h(h([t/x]L1) | h(h(h{[t/x]t2} : C | h{[t/x]t1} : B) | [t/x]L2))]]}
  \end{math}
\end{center}
Clearly, all terms are equivalent.
\end{report}
\end{itemize}
\end{proof}

\begin{corollary}[Cut-Elimination]
  \label{corollary:cut-elimination}
  Cut-elimination holds for FILL.
\end{corollary}

% section cut-elimination (end)

\section{Full Linear Categories}
\label{sec:full_linear_categories}
One of the first questions considering the categorical models of
linear logic was how to model Girard's exponential, $!$, which is read
``of course''.  The $!$ modality can be used to translate
intuitionistic logic into intuitionistic linear logic, and so the
correct categorical interpretation of $!$ should involve a
relationship between a cartesian closed category, and the model of
intuitionistic linear logic.

de Paiva gave one of the first categorical models of both classical
and intuitionistic linear logic in her thesis \cite{dePaiva:1988}. She
showed that a particular dialectica category called $\dial$ is a model
of FILL where $!$ is interpreted as a cofree comonad, see page 76 of
\cite{dePaiva:1988}.
\begin{definition}
  \label{def:dial2sets}
  The category $\dial$ consists of 
  \begin{itemize}
  \item objects that are triples, $A = (U,X,\alpha)$, where $U$ and
    $X$ are sets, and $\alpha \subseteq U \times X$ is a relation, and
  \item maps that are pairs $(f,F) : (U,X,\alpha) \to (V,Y,\beta)$
    where $f : U \to V$ and $F : Y \to X$ such that
    \begin{itemize}
    \item For any $u \in U$ and $y \in Y$, $\alpha(u,F(y))$ implies $\beta(f(u),y)$.
    \end{itemize}
  \end{itemize}
  Suppose $A = (U,X,\alpha)$, $B = (V,Y,\beta)$, and
  $C = (W,Z,\gamma)$.  Then identities are given by
  $(\id_U,\id_X) : A \to A$.  The composition of the maps
  $(f,F) : A \to B$ and $(g, G) : B \to C$ is defined as
  $(f;g,G;F) : A \to C$.
\end{definition}
In her thesis de Paiva defines a particular class of dialectica
categories called $GC$ over a base category $C$, see page 41 of
\cite{dePaiva:1988}.  The category $\dial$
defined above can be seen as an instantiation of $GC$ by setting $C$
to be the category $\sets$ of sets and functions between them.

Later, Seely gave a different categorial model that also confirmed
that the of-course exponential should be modeled by a comonad
\cite{Seely:1989}.  However, Seely's model turned out to be unsound,
as pointed out by Bierman \cite{Bierman:1994}.  This then prompted
Bierman, Hyland, de Paiva, and Benton to define another categorical
model called linear categories (Definition~\ref{def:linear-cat}) that
are sound, and also model $!$ using a cofree comonad
\cite{Bierman:1994}.  An unfortunate aspect of linear categories is
that their definition is quite complex.
\begin{definition}
  \label{def:linear-cat}
  A \textbf{linear category}, $\mathcal{C}$, consists of:
  \begin{center}
    \begin{itemize}
    \item A symmetric monoidal closed category $\mathcal{C}$,
    \item A symmetric monoidal comonad $(!, \epsilon, \delta, m_{A,B},
      m_I)$ such that 
      \begin{itemize}
      \item For every free $!$-coalgebra $(!A,\delta_A)$ there are two
        distinguished monoidal natural transformations $e_A : !A \to
        I$ and $d_A : !A \to !A \otimes !A$ which form a commutative
        comonoid and are coalgebra morphisms.
      \item If $f : (!A,\delta_A) \to (!B,\delta_B)$ is a coalgebra
        morphism between free coalgebras, then it is also a comonoid
        morphism.
      \end{itemize}
    \end{itemize}
  \end{center}
  This definition is the one given by Bierman in his thesis, see page
  140 of \cite{Bierman:1994}. Due to space constraints we omit the
  definitions of the various algebraic notions used in this
  definition, see \cite{Bierman:1994} for full definitions.
\end{definition}
\noindent
Intuitionistic logic can now be interpreted in a linear category as a
full subcategory of the category of $!$-coalgebras for the comonad,
see proposition 17 of \cite{Bierman:1994}.

Benton gave a more fundamental view of linear categories called LNL
models.
\begin{definition}
  \label{def:LNL-model}
  A \textbf{linear/non-linear model (LNL model)} consists of
  \begin{itemize}
  \item a cartesian closed category $(\cat{C}, 1, \times,
    \Rightarrow)$,
  \item a SMCC $(\cat{L},I,\otimes,\limp)$, and
  \item a pair of symmetric monoidal functors $(G,n) : \cat{L} \to
    \cat{C}$ and $(F,m) : \cat{C} \to \cat{L}$ between them that form
    a symmetric monoidal adjunction with $F \dashv G$.
  \end{itemize}
  This is the same definition given by Benton on page 12 of
  \cite{Benton:1994}.  Due to space constraints we omit the
  definitions of symmetric monoidal functors and adjunctions.
\end{definition}
A non-trivial consequence of the definition of a LNL model is that the
$!$ modality can indeed be interpreted as a comonad.  Suppose
$(\cat{L}, \cat{C},F,G)$ is a LNL model. Then the comonad is given by
$(\mathop{!}, \epsilon : \mathop{!} \to \mathsf{Id}, \delta :
\mathop{!} \to \mathop{!!})$
where $! = FG$, $\epsilon$ is the counit of the adjunction and
$\delta$ is the natural transformation $\delta_A = F(\eta_{G(A)})$,
see page 15 of \cite{Benton:1994}.  We recall the following result
from Benton \cite{Benton:1994}:
\begin{theorem}[LNL Models are Linear Categories, page 16 of \cite{Benton:1994}]
  \label{thm:lnl_models_are_linear_categories}
  \begin{itemize}
  \item[]
  \item[i.] Every LNL model is a linear category.
  \item[ii.] Every linear category is a LNL model.
  \end{itemize}
\end{theorem}
\begin{proof}
  The proof of part i. is a matter of checking that each part of the
  definition of a linear category can be constructed using the
  definition of a LNL model. See lemmata 3-7 of \cite{Benton:1994}.

  As for the proof of part ii. Given a linear category we have a SMCC and so the difficulty of
  proving this result is constructing the CCC and the adjunction
  between both parts of the model.  Suppose $\cat{L}$ is a linear
  category.  Benton constructs the CCC out of the full subcategory of
  Eilenberg-Moore category $\cat{L}^!$ whose objects are exponentiable
  coalgebras and is denoted $\mathsf{Exp}(\cat{L}^!)$.  He shows that
  this subcategory is cartesian closed, and contains the (co)Kleisli
  category, $\cat{L}_!$, Lemma~11 on page 23 of \cite{Benton:1994}.
  As for the adjunction
  $F : \mathsf{Exp}(\cat{L}^!) \to L : G$ can be defined using the
  adjunct functors $F(A,h_A) = A$ and $G(A) = (!A,\delta_A)$, see
  lemmata 13 - 16 of \cite{Benton:1994}.
\end{proof}

Next we show that the category $\dial$ is a full version of a linear
category. First, we extend the notion of a linear category to be
equipped with the necessary categorical structure to model par and its
unit.
\begin{definition}
  \label{def:linear-cat}
  A \textbf{full linear category}, $\mathcal{C}$, consists of:
  \begin{center}
    \begin{itemize}
    \item A linear category $(\mathcal{C}, \top, \otimes, \limp,e_A,d_A)$,
    \item A symmetric monoidal category $(\mathcal{C}, \perp, \parr)$,
    \item Distribution natural transformations $\mathsf{dist}_1 : A \otimes (B
      \parr C) \to (A \otimes B) \parr C$ and $\mathsf{dist}_2 : (A \parr B)
      \otimes C \to A \parr (B \otimes C)$,
    \end{itemize}
  \end{center}
\end{definition}
\noindent
The following is our first main result of this section.
\begin{lemma}
  \label{lemma:ddial_is_a_linear_category}
  The category $\dial$ is a full linear category.
\end{lemma}
\begin{proof}
  \todo{Explain the set notions used in the proof, like let, and projecting the result of a function.}
  We prove this by constructing each piece of a full linear category
  using the structure of $\dial$.

  First, we must construct a linear category. It is well known that
  $\mathsf{Sets}$ is a CCC, and in fact, locally cartesian closed, and
  so by using the results of de Paiva's thesis we can easily see that
  $\dial$ is symmetric monoidal closed:
  \begin{center}
    \begin{itemize}
    \item (Definition 7, page 43 of \cite{dePaiva:1988}). Suppose
      $A,B \in \obj{\dial}$.  Then there are sets $X$, $Y$, $V$, and
      $U$, and relations $\alpha \subseteq U \times X$ and
      $\beta \subseteq V \times Y$, such that, $A = (U,X,\alpha)$ and
      $B = (V,Y,\beta)$.  The tensor product of $A$ and $B$ can now be
      defined by $A \otimes B = (U \times V, (V \Rightarrow X) \times
      (U \Rightarrow Y),\alpha \otimes \beta)$, where $(- \Rightarrow
      -)$ is the internal hom of $\mathsf{Sets}$.  We define
      $((u,v),(f,g)) \in \alpha \otimes \beta$ if and only if
      $(u,f(v)) \in \alpha$ and $(v,g(u)) \in \beta$.  

      Suppose $A = (U,X,\alpha)$, $B = (V,Y,\beta)$,
      $C = (W,Z,\gamma)$, and $D = (S,T,\delta)$ objects of $\dial$,
      and $m_1 = (f, F) : A \to C$ and $m_2 = (g,G) : B \to D$ are
      maps of $\dial$.  Then the map $m_1 \otimes m_2 : A \otimes B
      \to C \otimes D$ is defined by $(f \times g, F_\otimes)$ where
      $f \times g$ is the ordinary cartesian product functor in
      $\sets$, and we define $F \otimes G$ as follows:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_\otimes : (S \Rightarrow Z) \times (W \Rightarrow T) \to (V \Rightarrow X) \times (U \Rightarrow Y)\\
            F_\otimes(h_1,h_2) = (\lambda v.F(h_1(g(v))),\lambda u.G(h_2(f(u))))
          \end{array}
        \end{math}
      \end{center}
      It is straightforward to confirm the relation condition on maps
      for $m_1 \otimes m_2$.

    \item (Definition 7, page 44 of \cite{dePaiva:1988}). Suppose
      $1 \in \obj{\sets}$ is the final object, and
      $\id_1 \subseteq 1 \times 1$.  Then we can define tensors
      unit by the object $\top = (1,1,\id_1)$.

    \item Suppose $A = (U,X,\alpha)$ is an object of $\dial$.  Then
      the map $\lambda_A : \top \otimes A \to A$ is defined by
      $(\hat{\lambda}_U,F_\lambda)$ where
      $\hat{\lambda}_U$ is the left unitor for the cartesian product in $\sets$,
      $F_\lambda(x) = (\diamond,\lambda y.x) : X \to (U \Rightarrow 1) \times (1 \Rightarrow X)$, 
      and $\diamond$ is the terminal arrow in $\sets$.
      It is easy to see that both
      $\hat{\lambda}_U$ and $F_\lambda$ have
      inverses, and thus, $\lambda_A$ has an inverse. It is straightforward to confirm the relation condition on maps
      for $\lambda_A$ and its inverse.

    \item Suppose $A = (U,X,\alpha)$ is an object of $\dial$.  Then
      the map $\rho_A : A \otimes \top \to A$ is defined similarly to
      $\lambda_A$ given above.

    \item Suppose $A = (U,X,\alpha) \in \obj{\dial}$ and
      $B = (V,Y,\beta) \in \obj{\dial}$.  Then we define the map
      $\beta_{A,B} : A \otimes B \to B \otimes A$ by
      $(\hat{\beta}_{U,V}, \hat{\beta}_{V \Rightarrow X,U \Rightarrow
        Y})$
      where $\hat{\beta}$ is the symmetry of the cartesian product in
      $\sets$.  Again, it is straightforward to see that $\beta$ has
      an inverse, and the relation condition on maps is satisfied.

    \item Suppose $A = (U,X,\alpha) \in \obj{\dial}$,
      $B = (V,Y,\beta) \in \obj{\dial}$, and
      $C = (W,Z,\gamma) \in \obj{\dial}$.  Then we define
      $\alpha_{A,B,C} : (A \otimes B) \otimes C \to A \otimes (B \otimes C)$
      by $(\hat{\alpha}_{U,V,W}, F_\alpha)$ where
      $\hat{\alpha}_{U,V,W}$ is the associator for the cartesian
      product in $\sets$ and $F_\alpha$ is defined as follows:
      \begin{center}
        \scriptsize
        \begin{math}
          \begin{array}{lll}
            F_\alpha : ((V \times W) \Rightarrow X) \times (U \Rightarrow ((W \Rightarrow Y) \times (V \Rightarrow Z))) \to 
            (W \Rightarrow ((V \Rightarrow X) \times (U \Rightarrow Y))) \times ((U \times V) \Rightarrow Z)\\
            F_\alpha(h_1,h_2) = (\lambda w.(\lambda v.h_1(v,w),\lambda u.h_2(u)_1(w)), \lambda (u,v).h_2(u)_2(v))\\
          \end{array}
        \end{math}
      \end{center}
      The inverse of $\alpha_{A,B,C}$ is similar, and it is
      straightforward to confirm the relation condition on maps.

    \item (Definition 9, page 44 of \cite{dePaiva:1988}). Suppose
      $A,B \in \obj{\dial}$.  Then there are sets $X$, $Y$, $V$, and
      $U$, and relations $\alpha \subseteq U \times X$ and
      $\beta \subseteq V \times Y$, such that, $A = (U,X,\alpha)$ and
      $B = (V,Y,\beta)$.  Then we define the internal hom of $\dial$
      by $A \limp B = ((U \Rightarrow V) \times (Y \Rightarrow X),U
      \times Y,\alpha \Rightarrow \beta)$.  We define $((f,g),(u,y))
      \in \alpha \Rightarrow \beta$ if and only if whenever $(u,g(y))
      \in \alpha$, then $(f(u),y) \in \beta$.  The locally cartesian 
      closed structure of $\sets$ guarantees that for any two objects $A, B \in
      \dial$ the internal hom $A \limp B \in \dial$ exists.      
    \end{itemize}
  \end{center}
  Using the constructions above $\dial$ is a SMCC by Proposition 24
  on page 46 of \cite{dePaiva:1988}.  

  Next we define the symmetric monoidal comonad
  $(!,\epsilon,\delta,m_{A,B},m_I)$ of the linear category:
  \begin{center}
    \begin{itemize}
    \item (Section 4.5, on page 76 of \cite{dePaiva:1988}). The
      endofunctor $! : \dial \to \dial$ is defined as follows:
      \begin{itemize}
      \item Objects. Suppose $A = (U,X,\alpha) \in \obj{\dial}$.  Then
        we set $!A = (U,U \Rightarrow X^*, !\alpha)$, where
        $(u,f) \in !\alpha$ if and only if
        $(u,f(u)_1) \in \alpha \text{ and } \cdots \text{ and }
        (u,f(u)_i) \in \alpha$ where $f(u)$ is a sequence of length $i$.

      \item Morphisms. Suppose $A = (U,X,\alpha) \in \obj{\dial}$,
        $B = (V,Y,\beta) \in \obj{\dial}$, and
        $(f,F) : A \to B \in \mor{\dial}$.  Then we define 
        $!(f,F) = (f,!F) : !A \to !B$, where $!F(g) = \lambda
        x.F^*(g(f(x))) : V \Rightarrow Y^* \to U \Rightarrow X^*$.
      \end{itemize}

    \item (Section 4.5, page 77 of \cite{dePaiva:1988}). The
      endofunctor $!$ defined above is the functor part of the comonad
      $(!,\epsilon, \delta)$.  Suppose
      $A = (U,X,\alpha) \in \obj{\dial}$. Then the co-unit
      $\epsilon : !A \to A$ is defined by $\epsilon =
      (\mathsf{id}_U,F_0)$ where $F_0(x) = \lambda y.(x) : X \to U
      \Rightarrow X^*$.  
      Furthermore, the co-multiplication $\delta_A
      : !A \to !!A$ is defined by $\delta_A = (\mathsf{id}_U,F_1)$
      where $F_1(g) = \lambda u.(f_1(u) \circ \cdots \circ f_i(u)) : U \Rightarrow (U
      \Rightarrow X^*)^* \to U \Rightarrow X^*$ where $g(u) = (f_1,\ldots,f_i)$.

    \item The following diagrams commute:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            \bfig
            \square[!A`!!A`!!A`!!!A;\delta_A`\delta_A`!\delta_A`\delta_{!A}]
            \efig
            &
              \,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,
            &
              \bfig
             \Atrianglepair/=`->`=`<-`->/[!A`!A`!!A`!A;`\delta_A``\epsilon_{!A}`!\epsilon_A]
           \efig
          \end{array}
        \end{math}
      \end{center}
      We show the left most diagram commutes first.  It suffices to
      show that
      $\delta_a;!\delta_A = (\id_U,!F_1;F_1) = (\id_U,F_1;F_1)$.  
      Suppose $g \in U \Rightarrow (U \Rightarrow X^*)^*$.  Then 
      \vspace{-15px}
      \begin{center}
        \small
        \begin{math}
          \begin{array}{lll}
            F_1(F_1(g)) \\
            \,\,= F_1(\lambda u.g(u)_1(u) \circ \cdots \circ g(u)_i(u))\\
            \,\,= \lambda u.g(u)_1(u)_1(u) \circ \cdots \circ g(u)_1(u)_j(u) \circ \cdots \circ g(u)_i(u)_1(u) \circ \cdots \circ g(u)_i(u)_k(u)\\
          \end{array}
        \end{math}
      \end{center}
      Consider the other direction in the diagram.  
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_1(!F_1(g)) 
            & = & F_1(\lambda x.F^*_1(g(x)))\\
            & = & \lambda u.F_1(g(u)_1)(u) \circ \cdots \circ F_1(g(u)_i)(u)\\            
          \end{array}
        \end{math}
      \end{center}
      Note that we have the following:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_1(g(u)_1)(u) & = & g(u)_1(u)_1(u) \circ \cdots \circ g(u)_1(u)_k(u)\\
            & \vdots & \\
            F_1(g(u)_i)(u) & = & g(u)_i(u)_1(u) \circ \cdots \circ g(u)_i(u)_k(u)\\
          \end{array}
        \end{math}
      \end{center}
      Clearly, the above reasoning implies that $F_1;F_1 = !F_1;F_1$.

      Now we prove that the second diagram commutes, but we break it
      into two.  
      We define $\delta_A;!\epsilon_A = (\id_U,!F_0;F_1)$ where for
      any $g \in U \Rightarrow X^*$,
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            (!F_0;F_1)(g) 
            & = & F_1(!F_0(g))\\
            & = & F_1(\lambda u'.F_0^*(g(u')))\\
            & = & F_1(\lambda u'.(\lambda y.(g(u')_1),\ldots,(\lambda y.g(u')_i)))\\
            & = & \lambda u.(g(u)_1) \circ \cdots \circ (g(u)_i)\\
            & = & g\\
          \end{array}
        \end{math}
      \end{center}
      and we can define $\delta_A;\epsilon_{!A} = (\id_U,F_0;F_1)$ where for
      any $g \in U \Rightarrow X^*$,
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            (F_0;F_1)(g) 
            & = & F_1(F_0(g))\\
            & = & F_1(\lambda y.(g))\\
            & = & \lambda u.g(u)\\
            & = & g\\
          \end{array}
        \end{math}
      \end{center}
      We can see by the reasoning above that
      $!F_0;F_1 = F_0;F_1 = \id_{U \Rightarrow X^*}$.

    \item The monoidal natural transformation $m_{\top} : \top \to !\top$
      is defined by $m_{\top} = (\id_1,\lambda f.\star)$ where $\star \in \top$. 
      It is easy to see that the relation condition
      on maps for $\dial$ is satisfied.  The following two diagrams
      commute:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            \bfig
            \square[\top`!\top`!\top`!!\top;m_\top`m_\top`\delta_\top`!m_\top]
            \efig
            &
              \,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,
            &
              \bfig
              \btriangle/->`=`->/[\top`!\top`\top;m_\top``\epsilon_{\top}]
           \efig
          \end{array}
        \end{math}
      \end{center}
      It is straightforward to see that the above two diagrams commute
      using the fact that the second coordinate of $m_\top$ is a
      constant function.

    \item The monoidal natural transformation
      $m_{A,B} : !A \otimes !B \to !(A \otimes B)$ is defined by
      $m_{A,B} = (\id_{U \times V},F_2)$. We need to define $F_2$,
      but two auxiliary functions are needed first:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            \begin{array}{lll}
              h_1 : (U \times V) \Rightarrow ((V \Rightarrow X) \times (U \Rightarrow Y))^* \to 
                    (V \Rightarrow (U \Rightarrow X^*))\\
              h_1(g,v,u) = (f_1(v),\ldots,f_i(v))
              \text{ where } g(u,v) = ((f_1,g_1),\ldots,(f_i,g_i))
            \end{array}
            \\
            &  \\
            \begin{array}{lll}
              h_2 : (U \times V) \Rightarrow ((V \Rightarrow X) \times (U \Rightarrow Y))^* \to 
                    (U \Rightarrow (V \Rightarrow Y^*))\\
              h_2(g,u,v) = (g_1(u),\ldots,g_i(u))
              \text{ where } g(u,v) = ((f_1,g_1),\ldots,(f_i,g_i))
            \end{array}
          \end{array}
        \end{math}
      \end{center}
      Then $F_2(g) = (h_1(g),h_2(g))$.  In order for $m_{A,B}$ to be
      considered a full fledge map in $\dial$ we have to verify that
      the relation condition on maps is satisfied.  Suppose $(u,v) \in U \times V$ and 
      $g \in (U \times V) \Rightarrow ((V \Rightarrow X) \times (U \Rightarrow Y))^*$, 
      where $g(u,v) = ((f_1,g_1), \ldots,(f_i,g_i))$. Then we know the following by definition:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            ((u,v),F(g)) \in !\alpha \otimes !\beta 
            & \text{ iff } & ((u,v),(h_1(g),h_2(g))) \in !\alpha \otimes !\beta\\
            & \text{ iff } & (u,h_1(g)(v)) \in !\alpha \text{ and } (v,h_2(g)(u)) \in !\beta\\
            & \text{ iff } & (u,f_1(v)) \in \alpha \text{ and } \cdots \text{ and } (u,f_i(v)) \text{ and }\\
            &              & (v,g_1(u)) \in \beta \text{ and } \cdots \text{ and } (v,g_i(u)) 
          \end{array}
        \end{math}
      \end{center}
      and
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            ((u,v),g) \in !(\alpha \otimes \beta) 
            & \text{ iff } & ((u,v),(f_1,g_1)) \in \alpha \otimes \beta \text{ and } \cdots \text{ and } \\
            &              & ((u,v),(f_i,g_i)) \in \alpha \otimes \beta\\
            & \text{ iff } & (u,f_1(v)) \in \alpha \text{ and } (v,g_1(u)) \in \beta \text{ and } \cdots \text{ and } \\
            &              & (u,f_i(v)) \in \alpha \text{ and } (v,g_i(u)) \in \beta
          \end{array}
        \end{math}
      \end{center}
      The previous definitions imply that
      $((u,v),F(g)) \in !\alpha \otimes !\beta$ implies
      $((u,v),g) \in !(\alpha \otimes \beta)$.  Thus, $m_{A,B}$ is a map in $\dial$.
      
      At this point we show that the following diagrams commute:
      \begin{center}
          \begin{mathpar}
            \bfig
            \square/->`<-`->`->/<700,700>[!\top \otimes !A`!(\top \otimes A)`\top \otimes !A`!A;m_{\top,A}`m_\top \otimes \id_{!A}`!\lambda_A`\lambda_{!A}]
            \place(350,350)[\text{A}]
            \efig
            \and
            \bfig
            \square/->`<-`->`->/<700,700>[!A \otimes !\top`!(A \otimes \top)`!A \otimes \top`!A;m_{A,\top}`\id_{!A} \otimes m_\top`!\rho_A`\rho_{!A}]
            \place(350,350)[\text{B}]
            \efig
          \end{mathpar}
      \end{center}
      \begin{center}
        \begin{mathpar}
            \bfig
            \square/->`->`->`->/<700,700>[!A \otimes !\top`!(A \otimes \top)`!A \otimes \top`!A;m_{A,\top}`\id_{!A} \otimes m_\top`!\rho_A`\rho_{!A}]
            \place(350,350)[\text{C}]
            \efig
            \and 
            \bfig
            \hSquares/->`->`->``->`->`->/[(!A \otimes !B) \otimes !C`!(A \otimes B) \otimes !C`!((A \otimes B) \otimes C)`!A \otimes (!B \otimes !C)`!A \otimes !(B \otimes C)`!(A \otimes (B \otimes C));m_{A,B} \otimes \id_{!C}`m_{A \otimes B,C}`\alpha_{!A,!B,!C}``!\alpha_{A,B,C}`\id_{!A} \otimes m_{B,C}`m_{A,B \otimes C}]
            \place(1300,250)[\text{D}]
            \efig
          \end{mathpar}          
      \end{center}
      We first prove that diagram A commutes, and then diagrams B and C will
      commute using similar reasoning. Following this we show that diagram D commutes. It suffices to show that
      \[(m_\top \otimes id_{!A});m_{\top,A};!\lambda_A = 
      (\hat{\lambda}_U,\lambda g.F_\otimes(F_2(F_\lambda(g)))) = (\hat{\lambda}_U,\lambda g.(\diamond,\lambda t.\lambda u.g(u))).\]
      Suppose
      $g \in U \Rightarrow X^*$, $(\star,u) \in 1 \times U$, and
      $g(u) = (x_1,\ldots,x_i)$. Then 
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_\lambda(g)(\star,u) 
            & = & (\lambda x'.(\diamond,\lambda y.x'))^*(g(\hat{\lambda}_U(\star,u)))\\
            & = & (\lambda x'.(\diamond,\lambda y.x'))^*(g(u))\\
            & = & (\lambda x'.(\diamond,\lambda y.x'))^*(x_1,\ldots,x_i)\\
            & = & ((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i))\\
          \end{array}
        \end{math}
      \end{center}
      This implies that 
      \[ F_\lambda(g) = \lambda (\star,u).\mathsf{let}\,(x_1,\ldots,x_i) = g(u)\,\mathsf{in}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)).\]
      Using this reasoning we can see the following:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_2(F_\lambda(g))
            & = & (\lambda u.\lambda t.\mathsf{let}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)) = F_\lambda(g)(t,u)\,\mathsf{in}\,\\
                  & & (\diamond(u),\ldots,\diamond(u)),\\            
            & & \lambda t.\lambda u.\mathsf{let}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)) = F_\lambda(g)(t,u)
                \,\mathsf{in}\, \\
            & & ((\lambda y.x_1)(t),\ldots,(\lambda y.x_1)(t)))\\
            & = & (\lambda u.\lambda t.\mathsf{let}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)) = F_\lambda(g)(t,u)\,\mathsf{in}\,\\
            & & (\star,\ldots,\star),\\            
            & & \lambda t.\lambda u.\mathsf{let}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)) = F_\lambda(g)(t,u)
                \,\mathsf{in}\, \\
            & & (x_1,\ldots,x_1))\\
            & = & (\lambda u.\lambda t.(\star,\ldots,\star),\\            
            & & \lambda t.\lambda u.\mathsf{let}\,((\diamond,\lambda y.x_1),\ldots,(\diamond,\lambda y.x_i)) = F_\lambda(g)(t,u)
                \,\mathsf{in}\, \\
            & & (x_1,\ldots,x_1))\\
            & = & (\lambda u.\lambda t.(\star,\ldots,\star), \lambda t.\lambda u.g(u))
          \end{array}
        \end{math}
      \end{center}
      Finally, the previous allows us to infer the following:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_\otimes(F_2(F_\lambda(g)))
            & = & (\diamond, \lambda t.\lambda u.g(u))\\
          \end{array}
        \end{math}
      \end{center}
      Thus, we obtained our desired result.

      \noindent
      We show that diagram C commutes by observing that
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            (m_{A,B} \otimes !\id_{!C});m_{A\otimes B,C};!\alpha_{A,B,C}
            & = & (\id,F_\otimes);(\id,F_2);(\hat{\alpha},!F_\alpha)\\
            & = & (\hat{\alpha},!F_\alpha;F_2;F_\otimes)\\
            & = & (\hat{\alpha},F_2;F_\otimes;F_\alpha)\\
            & = & (\hat{\alpha},F_\alpha);(\id,F_\otimes);(\id,F_2)\\
          \end{array}
        \end{math}
      \end{center}
      It suffices to show that $!F_\alpha;F_2;F_\otimes = F_2;F_\otimes;F_\alpha$:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            (!F_\alpha;F_2;F_\otimes)(g)
            & = & F_\otimes(F_2(!F_\alpha(g)))\\
            & = & F_\otimes(F_2(\lambda x.F^*_\alpha(g(x))))\\
          \end{array}
        \end{math}
      \end{center}
      Suppose
      \begin{center}
        \vspace{-20px}
        \begin{math}
          \begin{array}{lll}
            h_1 = \lambda v.\lambda u.\mathsf{let}\,((f_1,g_1),\ldots,(f_i,g_i)) = F^*_\alpha(g(u,v))\,\mathsf{in}\,
            (f_1(v),\ldots,f_i(v)),\\
            \\
            h_2 = \lambda u.\lambda v.\mathsf{let}\,((f_1,g_1),\ldots,(f_i,g_i)) = F^*_\alpha(g(u,v)) \,\mathsf{in}\,
           (g_1(u),\ldots,g_i(u)), \text{ and }\\
           \\
           F^*_\alpha(g(u,v)) = \mathsf{let}\, ((f'_1,g'_1),\ldots,(f'_j,g'_j)) = g(u,v) \,\mathsf{in}\,\\
      \,\,\,\,\,\,\,\,\,\,(\lambda w.(\lambda v'.f_1'(v',w),\lambda u.g'_1(u)_1(w)),\lambda (u,v').g'_1(u)_2(v')),\ldots,\\
      \,\,\,\,\,\,\,\,\,\,\,(\lambda w.(\lambda v'.f_j'(v',w),\lambda u.g'_j(u)_1(w)),\lambda (u,v').g'_j(u)_2(v'))).
          \end{array}
        \end{math}
      \end{center}
      Then we can simplify $h_1$ and $h_2$ as follows:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            \begin{array}{lll}
              h_1 = \lambda v.\lambda u.\mathsf{let}\,((f'_1,g'_1),\ldots,(f'_j,g'_j)) = g(u,v)\,\mathsf{in}\,\\
              \,\,\,\,\,\,\,\,\,((\lambda v'.f_1'(v',v),\lambda u'.g'_1(u')_1(v)),\ldots,(\lambda v'.f_j'(v',v),\lambda u'.g'_j(u')_1(v))) \\
            \end{array}\\
            \text{ and }\\
            \begin{array}{lll}
              h_2 = \lambda u.\lambda v.\mathsf{let}\,(u_1,u_2) = u\,\mathsf{in}\, \\
              \,\,\,\,\,\,\,\mathsf{let}\,((f'_1,g'_1),\ldots,(f'_j,g'_j)) = g((u_1,u_2),v) \,\mathsf{in}\,\\
              \,\,\,\,\,\,\,\,\,\,\,(g'_1(u_1)_2(u_2),\ldots,g'_j(u_1)_2(u_2))
            \end{array}
          \end{array}
        \end{math}
      \end{center}
      By the definition of $F_2$ the previous reasoning implies:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_\otimes(F_2(\lambda x.F^*_\alpha(g(x))))
            & = & F_\otimes(h_1,h_2)\\
            & = & (\lambda v.F_2(h_1(v)),h_2)\\
          \end{array}
        \end{math}
      \end{center}
      Expanding the definition of $F_2(h_1(v))$ in the above definitions yields:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_2(h_1(v))
            & = & (h'_1,h'_2)\\
          \end{array}
        \end{math}
      \end{center}
      where
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            h'_1 = \lambda v''.\lambda u''.(f'_1(v'',v),\ldots,f'_j(v'',v))\\
            h'_2 = \lambda u''.\lambda v''.(g'_1(u')_1(v),\ldots,g'_j(u')_1(v))\\
          \end{array}
        \end{math}
      \end{center}
      At this point we can see that
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            (\lambda v.F_2(h_1(v)),h_2) & = & (\lambda v.(h'_1,h'_2),h_2)\\
          \end{array}
        \end{math}
      \end{center}
      We now simplify $F_2;F_\otimes;F_\alpha$.  We know by definition:
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_2(g) & = & (h''_1,h''_2)
          \end{array}
        \end{math}
      \end{center}
      where
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            \begin{array}{lll}
              h''_1 & = & \lambda v.\lambda u.\mathsf{let}\,((f'_1,g'_1),\ldots,(f'_j,g'_j)) = g(u,v)\,\mathsf{in}\\
              & & \,\,\,\,\,\,\,\,\,\mathsf{let}\,(v',v'') = v\,\mathsf{in}\,(f'_1(v',v''),\ldots,f'_k(v',v''))
              
            \end{array}\\
            \text{ and }\\
            \begin{array}{lll}
              h''_2 & = & \lambda u.\lambda v.\mathsf{let}\,((f'_1,g'_1),\ldots,(f'_j,g'_j)) = g(u,v)\,\mathsf{in}\\
              & & \,\,\,\,\,\,\,\,\,(g'_1(u),\ldots,g'_k(u))\\
            \end{array}
          \end{array}
        \end{math}
      \end{center}
      This implies that
      \begin{center}
        \begin{math}
          \begin{array}{lll}
            F_\alpha(F_\otimes(F_2(g)))
            & = & F_\alpha(F_\otimes(h''_1,h''_2))\\
            & = & F_\alpha(h''_1,\lambda u_4.F_2(h''_2(u_4)))\\
            & = & (\lambda w.(\lambda v.h''_1(v,w),\lambda u.F_2(h''_2(u))_1(w)),\lambda (u,v).F_2(h''_2(u))_2(v))
          \end{array}
        \end{math}
      \end{center}
      Finally, by expanding the definition of $F_2$ in the last line
      of the above reasoning we can see that
      \[ (\lambda v.(h'_1,h'_2),h_2) = (\lambda w.(\lambda v.h''_1(v,w),\lambda u.F_2(h''_2(u))_1(w)),\lambda (u,v).F_2(h''_2(u))_2(v)) \]
      modulo currying of set-theoretic functions.
    \end{itemize}    
  \end{center}  
\end{proof}

% section full_linear_categories (end)



\section{Conclusion and Future Work}
\label{sec:conclusion_and_future_work}

We first gave the definition of full intuitionistic linear logic using
the left rule for par proposed by Bellin in
Section~\ref{sec:full_intuitionistic_linear_logic_(fill)}.  We then
proved cut-elimination of FILL in Section~\ref{sec:cut-elimination} by
adapting the well-known cut-elimination procedure for classical linear
logic to FILL.  Finally, we gave a semantics of FILL interms of
order-enriched dialectica categories in
Section~\ref{sec:order-enriched_dialectica_categories}.

\textbf{Future work.} Lorenzen games are a particular type of game
semantics for various logics developed by Lorenz, Felscher, and Rahman
et al. See \cite{Keiff:2011,Rahman:2005} for an introduction.
Lorenzen games consist of a first-order language consisting of the
logical connectives of the logic one wishes to study.  Then the
structure of the games are defined by two types of rules: particle
rules and structural rules.  The particle rules describe how formulas
can be attacked or defended based on the formulas main connective.
Then the structural rules orchestrate the particle rules as the game
progresses.  They describe the overall organization of the game.

Rahman showed that Lorenzen games could be defined for classical
linear logic \cite{Rahman:2002}.  The main difficulty is enforcing
linearity, but due to the flexibility inherit in the definition of
Lorenzen games it can be enforced in the particle rules.  He was able
to define a sound and complete semantics in Lorenzen games for
classical linear logic, but he does mention that one could adopt a
particular structural rule that enforces intuitionism.  We plan to
show that by adopting this rule we actually obtain a sound and
complete semantics in Lorenzen games for FILL.  Furthermore, we hope
to show that these strategies of the games are also compositional, and
thus, can be used as the morphisms of a category of Lorezen games.
% section conclusion_and_future_work (end)


\bibliographystyle{plain}
\bibliography{ref}

\appendix

\begin{report}
  \section{The full specification of FILL}
\label{sec:fill_specification}
\FILLall{}
% section the_full_fill_specification (end)
\end{report}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
